À(
3D:\Solutions\Services\HCM360\AddMember\AddMember.cs
	namespace 	
	AddMember
 
{		 
public

 

static

 
class

 
	AddMember

 !
{ 
[ 	
FunctionName	 
( 
$str !
)! "
]" #
public 
static 
void 
Run 
( 
[  
ServiceBusTrigger  1
(1 2
$str2 ?
,? @
$strA U
,U V

ConnectionW a
=b c
$strd ~
)~ 
]	 Ä
string
Ä Ü
mySbMsg
á é
,
é è
ILogger
ê ó
log
ò õ
)
õ ú
{ 	
log 
. 
LogInformation 
( 
$" !D
8C# ServiceBus topic trigger function processed message: ! Y
{Y Z
mySbMsgZ a
}a b
"b c
)c d
;d e
var 
member 
= 
JsonConvert $
.$ %
DeserializeObject% 6
<6 7
Member7 =
>= >
(> ?
mySbMsg? F
)F G
;G H
if 
( 
member 
!= 
null 
) 
{ 
var 
str 
= 
Environment %
.% &"
GetEnvironmentVariable& <
(< =
$str= R
)R S
;S T
Random 
rd 
= 
new 
Random  &
(& '
)' (
;( )
var 
physicianId 
=  !
rd" $
.$ %
Next% )
() *
$num* +
,+ ,
$num- .
). /
;/ 0
log 
. 
LogInformation "
(" #
$"# %
Physician Id : % 4
{4 5
physicianId5 @
}@ A
"A B
)B C
;C D
using 
( 
SqlConnection $
con% (
=) *
new+ .
SqlConnection/ <
(< =
str= @
)@ A
)A B
{ 
con 
. 
Open 
( 
) 
; 
var 
query 
= 
$str  F
+G H
memberI O
.O P
	FirstNameP Y
+Z [
$str\ a
+b c
memberd j
.j k
LastNamek s
+t u
$strv {
+| }
member	~ Ñ
.
Ñ Ö
Address
Ö å
+
ç é
$str
è î
+
ï ñ
member
ó ù
.
ù û
State
û £
+
§ •
$str
¶ ´
+
¨ ≠
member
Æ ¥
.
¥ µ
EmailAddress
µ ¡
+
¬ √
$str
ƒ …
+
  À
member
Ã “
.
“ ”
SSN
” ÷
+
◊ ÿ
$str
Ÿ ›
+
ﬁ ﬂ
physicianId
‡ Î
+
Ï Ì
$str
Ó Ò
;
Ò Ú
log 
. 
LogInformation &
(& '
$"' )
insert query : ) 8
{8 9
query9 >
}> ?
"? @
)@ A
;A B
using 
( 

SqlCommand %
cmd& )
=* +
new, /

SqlCommand0 :
(: ;
query; @
,@ A
conB E
)E F
)F G
{ 
var 
rows  
=! "
cmd# &
.& ' 
ExecuteNonQueryAsync' ;
(; <
)< =
;= >
log   
.   
LogInformation   *
(  * +
$"  + -
{  - .
rows  . 2
}  2 3
 rows were updated  3 E
"  E F
)  F G
;  G H
}!! 
}"" 
}## 
}$$ 	
}%% 
public&& 

class&& 
Member&& 
{'' 
public(( 
string(( 
	FirstName(( 
{((  !
get((" %
;((% &
set((' *
;((* +
}((, -
public** 
string** 
LastName** 
{**  
get**! $
;**$ %
set**& )
;**) *
}**+ ,
public,, 
string,, 
Address,, 
{,, 
get,,  #
;,,# $
set,,% (
;,,( )
},,* +
public.. 
string.. 
State.. 
{.. 
get.. !
;..! "
set..# &
;..& '
}..( )
public00 
string00 
EmailAddress00 "
{00# $
get00% (
;00( )
set00* -
;00- .
}00/ 0
public22 
string22 
SSN22 
{22 
get22 
;22  
set22! $
;22$ %
}22& '
}33 
}44 