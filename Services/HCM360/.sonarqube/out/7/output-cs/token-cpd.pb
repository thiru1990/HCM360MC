é(
9D:\Solutions\Services\HCM360\UpdateMember\UpdateMember.cs
	namespace 	
UpdateMember
 
{		 
public

 

static

 
class

 
UpdateMember

 $
{ 
[ 	
FunctionName	 
( 
$str $
)$ %
]% &
public 
static 
void 
Run 
( 
[  
ServiceBusTrigger  1
(1 2
$str2 ?
,? @
$strA U
,U V

ConnectionW a
=b c
$strd ~
)~ 
]	 Ä
string
Å á
mySbMsg
à è
,
è ê
ILogger
ë ò
log
ô ú
)
ú ù
{ 	
log 
. 
LogInformation 
( 
$" !D
8C# ServiceBus topic trigger function processed message: ! Y
{Y Z
mySbMsgZ a
}a b
"b c
)c d
;d e
var 
member 
= 
JsonConvert $
.$ %
DeserializeObject% 6
<6 7
MemberDetails7 D
>D E
(E F
mySbMsgF M
)M N
;N O
if 
( 
member 
!= 
null 
) 
{ 
var 
str 
= 
Environment %
.% &"
GetEnvironmentVariable& <
(< =
$str= R
)R S
;S T
using 
( 
SqlConnection $
con% (
=) *
new+ .
SqlConnection/ <
(< =
str= @
)@ A
)A B
{ 
con 
. 
Open 
( 
) 
; 
var 
query 
= 
$str  P
+Q R
memberS Y
.Y Z
MemberFirstNameZ i
+j k
$str	l Ç
+
É Ñ
member
Ö ã
.
ã å
MemberLastName
å ö
+
õ ú
$str
ù ¥
+
µ ∂
member
∑ Ω
.
Ω æ
Address
æ ≈
+
∆ «
$str
» ‹
+
› ﬁ
member
ﬂ Â
.
Â Ê
State
Ê Î
+
Ï Ì
$str
Ó â
+
ä ã
member
å í
.
í ì
EmailAddress
ì ü
+
† °
$str
¢ ¥
+
µ ∂
member
∑ Ω
.
Ω æ
SSN
æ ¡
+
¬ √
$str
ƒ ◊
+
ÿ Ÿ
member
⁄ ‡
.
‡ ·
PhysicianID
· Ï
+
Ì Ó
$str
Ô É
+
Ñ Ö
member
Ü å
.
å ç
MemberID
ç ï
;
ï ñ
log 
. 
LogInformation &
(& '
$"' )
insert query : ) 8
{8 9
query9 >
}> ?
"? @
)@ A
;A B
using 
( 

SqlCommand %
cmd& )
=* +
new, /

SqlCommand0 :
(: ;
query; @
,@ A
conB E
)E F
)F G
{ 
var 
rows  
=! "
cmd# &
.& ' 
ExecuteNonQueryAsync' ;
(; <
)< =
;= >
log 
. 
LogInformation *
(* +
$"+ -
{- .
rows. 2
}2 3
 rows were updated3 E
"E F
)F G
;G H
} 
} 
} 
}   	
}!! 
public## 

class## 
MemberDetails## 
{$$ 
public%% 
int%% 
MemberID%% 
{%% 
get%% !
;%%! "
set%%# &
;%%& '
}%%( )
public'' 
string'' 
MemberFirstName'' %
{''& '
get''( +
;''+ ,
set''- 0
;''0 1
}''2 3
public)) 
string)) 
MemberLastName)) $
{))% &
get))' *
;))* +
set)), /
;))/ 0
}))1 2
public++ 
string++ 
Address++ 
{++ 
get++  #
;++# $
set++% (
;++( )
}++* +
public-- 
string-- 
State-- 
{-- 
get-- !
;--! "
set--# &
;--& '
}--( )
public// 
string// 
EmailAddress// "
{//# $
get//% (
;//( )
set//* -
;//- .
}/// 0
public11 
string11 
SSN11 
{11 
get11 
;11  
set11! $
;11$ %
}11& '
public33 
int33 
PhysicianID33 
{33  
get33! $
;33$ %
set33& )
;33) *
}33+ ,
}44 
}55 